<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Narapoi</title>
  <style>
    :root{
      --bg:#0b0d10;--panel:#12161c;--text:#e8edf2;--muted:#9aa4af;
      --accent:#ff4d6d;--chip:#1b2330;--shadow:0 10px 30px rgba(0,0,0,.45);--r:14px
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:12px}

    .topbar{
      position:sticky;top:0;z-index:10;
      background:linear-gradient(to bottom, rgba(11,13,16,.95), rgba(11,13,16,.65));
      backdrop-filter: blur(10px);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .topbar .wrap{display:flex;gap:10px;align-items:center}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .dot{width:10px;height:10px;border-radius:999px;background:var(--accent);box-shadow:0 0 18px rgba(255,77,109,.55)}
    .search{flex:1}
    .search input{
      width:100%;padding:11px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.08);
      background:rgba(18,22,28,.9);color:var(--text);outline:none
    }
    .btn{padding:10px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.10);background:rgba(18,22,28,.9);color:var(--text)}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0;align-items:center}
    .chip{
      padding:8px 10px;border-radius:999px;background:var(--chip);
      border:1px solid rgba(255,255,255,.06);color:var(--muted);font-size:12px;cursor:pointer;user-select:none
    }
    .chip.active{color:var(--text);border-color:rgba(255,77,109,.35);background:rgba(255,77,109,.10)}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    @media (min-width:860px){ .grid{grid-template-columns:repeat(4,1fr)} }
    .card{
      background:linear-gradient(180deg, rgba(18,22,28,.9), rgba(15,19,24,.9));
      border:1px solid rgba(255,255,255,.06);
      border-radius:var(--r);
      overflow:hidden;
      box-shadow: var(--shadow);
      transition: transform .15s ease, border-color .15s ease;
    }
    .card:hover{transform: translateY(-2px);border-color:rgba(255,77,109,.35)}
    .thumb{position:relative;aspect-ratio:16/9;background:#0f1318;overflow:hidden}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .badges{position:absolute;left:8px;top:8px;display:flex;gap:6px;flex-wrap:wrap}
    .badge{font-size:11px;font-weight:700;padding:5px 7px;border-radius:999px;background:rgba(0,0,0,.55);border:1px solid rgba(255,255,255,.10)}
    .badge.accent{background:rgba(255,77,109,.18);border-color:rgba(255,77,109,.35);color:#ffd6de}
    .duration{position:absolute;right:8px;bottom:8px;font-size:11px;padding:5px 7px;border-radius:8px;background:rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.10);color:#fff}
    .body{padding:10px}
    .title{font-weight:750;font-size:13px;line-height:1.2;margin:0 0 6px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .meta{font-size:12px;color:var(--muted);display:flex;gap:8px;align-items:center}
    .empty{padding:18px;margin-top:10px;border:1px dashed rgba(255,255,255,.12);border-radius:var(--r);color:var(--muted)}
    .footer{padding:22px 12px;color:var(--muted);text-align:center;font-size:12px}

    body.age-locked .wrap,
    body.age-locked .topbar { filter: blur(10px); pointer-events: none; user-select: none; }
    .age-overlay{
      position: fixed; inset: 0; z-index: 9999; display: none;
      align-items: center; justify-content: center; padding: 18px;
      background: rgba(0,0,0,.55);
    }
    body.age-locked .age-overlay{display:flex}
    .age-modal{
      width: 100%; max-width: 520px; border-radius: var(--r);
      background: rgba(18,22,28,.95); border: 1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow); padding: 16px;
    }
    .age-title{font-weight: 900;font-size: 18px;margin: 0 0 6px}
    .age-text{color: var(--muted);font-size: 13px;line-height: 1.45;margin: 0 0 12px}
    .age-actions{display:flex;gap:10px;margin-top:10px}
    .age-actions button{
      flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.10);
      background: rgba(18,22,28,.9);color:var(--text);font-weight:800;cursor:pointer
    }
    .age-actions .primary{background: var(--accent);border:0}

    .sectionHead{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-top:12px;margin-bottom:10px}
    .sectionTitle{font-weight:900;letter-spacing:.2px;font-size:14px;margin:0;}
    .sectionNote{color:var(--muted);font-size:12px}

    .popWrap{position:relative;margin-bottom:10px}
    .popRow{display:flex;gap:10px;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;padding-bottom:4px;scrollbar-width:thin;}
    .popRow::-webkit-scrollbar{height:8px}
    .popRow::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:999px}
    .popFade{position:absolute;top:0;bottom:0;width:52px;pointer-events:none;z-index:4;opacity:0;transition:opacity .15s ease;}
    .popFade.left{left:0;background:linear-gradient(to right, rgba(11,13,16,1), rgba(11,13,16,0))}
    .popFade.right{right:0;background:linear-gradient(to left, rgba(11,13,16,1), rgba(11,13,16,0))}
    .popCard{flex:0 0 auto;width:160px;border-radius:12px;scroll-snap-align:start}
    @media (min-width:860px){ .popCard{width:190px} }
    .popCard .thumb{aspect-ratio:16/10}
    .popCard .body{padding:8px}
    .popCard .title{font-size:12px;-webkit-line-clamp:2;margin:0 0 6px}
    .popCard .meta{font-size:11px}
    .popNav{
      position:absolute;top:50%;transform:translateY(-50%);z-index:5;
      width:34px;height:34px;border-radius:999px;border:1px solid rgba(255,255,255,.12);
      background:rgba(18,22,28,.85);color:var(--text);
      display:flex;align-items:center;justify-content:center;
      cursor:pointer;box-shadow: var(--shadow);user-select:none
    }
    .popNav:hover{border-color:rgba(255,77,109,.35)}
    .popPrev{left:-6px}
    .popNext{right:-6px}
    @media (max-width:420px){ .popPrev{left:0} .popNext{right:0} }
    .popNav.hide{display:none}

    .card.anim{
      opacity:0; transform: translateY(10px);
      transition: opacity .35s ease, transform .35s ease, border-color .15s ease;
      will-change: opacity, transform;
    }
    .card.anim.show{opacity:1;transform: translateY(0)}

    .pager{margin-top:14px;display:none;gap:10px;align-items:center;justify-content:center;flex-wrap:wrap;}
    .pager .btn{cursor:pointer}
    .pagerInfo{
      color:var(--muted);font-size:12px;padding:8px 10px;border:1px solid rgba(255,255,255,.06);
      border-radius:999px;background:rgba(18,22,28,.55);
    }
    .pager .btn:disabled{opacity:.5;cursor:not-allowed}

    .view{display:none}
    .view.show{display:block}

    .bottomNavSpace{height:78px}
    .bottomNav{
      position:fixed;left:0;right:0;bottom:0;z-index:50;
      border-top:1px solid rgba(255,255,255,.06);
      background:linear-gradient(to top, rgba(11,13,16,.98), rgba(11,13,16,.70));
      backdrop-filter: blur(10px);
    }
    .bottomNav .wrap{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;padding:10px 12px;align-items:center;}
    .navItem{
      display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;
      padding:8px 6px;border-radius:14px;cursor:pointer;user-select:none;border:1px solid transparent;color:rgba(232,237,242,.85);
    }
    .navItem svg{width:22px;height:22px;stroke:currentColor;fill:none;stroke-width:2;opacity:.92;}
    .navText{font-size:11px;color:rgba(154,164,175,.9)}
    .navItem.active{background:rgba(255,77,109,.10);border-color:rgba(255,77,109,.25);color:var(--text);}
    .navItem.active .navText{color:#ffd6de}

    .miniList{display:flex;flex-direction:column;gap:10px;margin-top:12px;}
    .miniItem{
      display:flex;gap:10px;align-items:center;padding:10px;border-radius:14px;
      border:1px solid rgba(255,255,255,.06);background:rgba(18,22,28,.65);box-shadow: var(--shadow);
    }
    .miniThumb{width:88px;aspect-ratio:16/9;border-radius:12px;background:#0f1318;overflow:hidden;flex:0 0 auto;}
    .miniThumb img{width:100%;height:100%;object-fit:cover;display:block}
    .miniTitle{font-weight:800;font-size:12px;line-height:1.25;margin:0 0 6px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .miniMeta{font-size:12px;color:var(--muted)}
    .pillTiny{
      display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.10);
      background:rgba(18,22,28,.7);color:var(--muted);font-size:11px;
    }

    .genreOverlay{
      position:fixed;inset:0;z-index:9998;
      display:none;align-items:flex-end;justify-content:center;
      padding:14px;background:rgba(0,0,0,.55);
    }
    .genreOverlay.show{display:flex}
    .genreModal{
      width:100%;max-width:820px;background:rgba(18,22,28,.98);
      border:1px solid rgba(255,255,255,.10);border-radius:18px;
      box-shadow: var(--shadow);overflow:hidden;
    }
    .genreModalTop{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:12px 12px;border-bottom:1px solid rgba(255,255,255,.06);
    }
    .genreModalTitle{font-weight:900;font-size:13px;color:var(--text)}
    .genreClose{
      padding:10px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.10);
      background:rgba(18,22,28,.9);color:var(--text);cursor:pointer
    }
    .genreModalBody{padding:12px;max-height:min(60vh,520px);overflow:auto;}
    .genreGrid{display:flex;flex-wrap:wrap;gap:8px;}
  </style>
</head>
<body>

  <div class="age-overlay" id="ageOverlay" aria-hidden="true">
    <div class="age-modal" role="dialog" aria-modal="true" aria-labelledby="ageTitle">
      <div class="age-title" id="ageTitle">Peringatan 18+</div>
      <p class="age-text">
        Konten di situs ini hanya untuk pengunjung berusia <b>18 tahun ke atas</b>.
        Dengan melanjutkan, kamu menyatakan bahwa kamu sudah 18+ dan setuju melihat konten dewasa.
      </p>
      <div class="age-actions">
        <button class="primary" id="ageYes">Saya 18+</button>
        <button id="ageNo">Keluar</button>
      </div>
      <p class="age-text" style="margin-top:10px;font-size:12px;">
        Kasih Sayang Admin Kepada MemberðŸ¥°ðŸ˜™ðŸ˜˜ðŸ—¿ðŸ—¿ðŸ—¿
      </p>
    </div>
  </div>

  <div class="topbar">
    <div class="wrap">
      <div class="brand"><span class="dot"></span><span>Narapoi</span></div>
      <div class="search">
        <input id="q" placeholder="Cari video..." />
      </div>
      <button class="btn" id="reload">Reload</button>
    </div>
  </div>

  <div class="wrap">

    <div class="view show" id="viewHome">

      <div class="sectionHead" id="popularHead" style="display:none;">
        <h2 class="sectionTitle">Popular posts</h2>
        <div class="sectionNote">Top by views</div>
      </div>

      <div class="popWrap" id="popWrap" style="display:none;">
        <div class="popNav popPrev" id="popPrev" aria-label="Prev">â€¹</div>
        <div class="popNav popNext" id="popNext" aria-label="Next">â€º</div>
        <div class="popFade left" id="popFadeL"></div>
        <div class="popFade right" id="popFadeR"></div>
        <div id="popularRow" class="popRow"></div>
      </div>

      <div class="chips" id="chips"></div>

      <div class="genreOverlay" id="genreOverlay" aria-hidden="true">
        <div class="genreModal" role="dialog" aria-modal="true">
          <div class="genreModalTop">
            <div class="genreModalTitle">Semua Genre</div>
            <button class="genreClose" id="genreClose">Tutup</button>
          </div>
          <div class="genreModalBody">
            <div class="genreGrid" id="genreAllWrap"></div>
          </div>
        </div>
      </div>

      <div id="grid" class="grid"></div>

      <div class="pager" id="pager">
        <button class="btn" id="prevBtn">Prev</button>
        <div class="pagerInfo" id="pagerInfo">Page 1</div>
        <button class="btn" id="nextBtn">Next</button>
      </div>

      <div id="empty" class="empty" style="display:none;">Belum ada video.</div>
    </div>

    <div class="view" id="viewSupport">
      <div class="chips" style="margin-top:12px;">
        <span class="chip active">Dukungan</span>
      </div>

      <div class="empty" style="display:block;">
        <button class="btn" id="btnReport" style="width:100%;margin-top:10px;cursor:pointer">Kirim Laporan</button>
        <button class="btn" id="btnDonate" style="width:100%;margin-top:10px;cursor:pointer">Donate</button>
        <button class="btn" id="btnReqUpdate" style="width:100%;margin-top:10px;cursor:pointer">Request Update</button>
      </div>

      <div class="empty" style="display:block;">
        <div style="color:var(--text);font-weight:900;margin-bottom:10px;">Tutorial Cara Menonton</div>
        <div style="line-height:1.7;">
          1. Masuk ke <b>Beranda</b> lalu pilih video.<br>
          2. Di halaman player, tunggu video siap lalu tekan <b>Play</b>.<br>
          3. Kalau video tidak jalan, coba tekan <b>Reload</b> di atas atau ganti jaringan/browser.<br>
          4. Kalau ada masalah (blank/loading), kirim <b>Laporan</b> lewat tombol di atas + sertakan link video.
        </div>
      </div>

      <div class="empty" style="display:block;">
        <div style="color:var(--text);font-weight:900;margin-bottom:10px;">Tutorial Cara Download</div>
        <div style="line-height:1.7;">
          1. Buka video yang mau didownload.<br>
          2. Cari tombol <b>DOWNLOAD FULL</b> (kalau tersedia).<br>
          3. Klik <b>DOWNLOAD FULL</b> lalu ikuti langkah yang muncul di halaman (kalau ada hitungan/wait).<br>
          4. Setelah selesai, link download akan kebuka otomatis / kamu tinggal balik dan diarahkan ke link download.<br>
          5. Kalau tombol download tidak ada, berarti video itu belum ada link download-nya.
        </div>
      </div>
    </div>

    <div class="view" id="viewProfile">
      <div class="chips" style="margin-top:12px;">
        <span class="chip active">Profil</span>
        <span class="pillTiny" id="anonIdPill"></span>
      </div>
      <div id="profileList" class="miniList"></div>
      <div id="profileEmpty" class="empty" style="display:none;">Belum ada riwayat.</div>
    </div>

    <div class="footer">Narapoi Punya</div>
    <div class="bottomNavSpace"></div>
  </div>

  <div class="bottomNav">
    <div class="wrap">
      <div class="navItem active" id="navHome">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 10.5L12 3l9 7.5"></path><path d="M5 10v10h14V10"></path><path d="M9 20v-6h6v6"></path></svg>
        <div class="navText">Beranda</div>
      </div>

      <div class="navItem" id="navSupport">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6h16v12H4z"></path><path d="M4 7l8 6 8-6"></path></svg>
        <div class="navText">Dukungan</div>
      </div>

      <div class="navItem" id="navProfile">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20 21a8 8 0 0 0-16 0"></path><path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"></path></svg>
        <div class="navText">Profil</div>
      </div>
    </div>
  </div>

  <!-- PROD: JS dipisah biar gampang minify/obfuscate -->
  <script src="./app.min.js" defer></script>
</body>
</html>
